<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Beginning Python Programming — Part 12</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Beginning Python Programming — Part 12</h1>
</header>
<section data-field="subtitle" class="p-summary">
An introduction to iterators and generators
</section>
<section data-field="body" class="e-content">
<section name="9cf1" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="45d0" id="45d0" class="graf graf--h3 graf--leading graf--title">Beginning Python Programming — Part 12</h3><h4 name="10ac" id="10ac" class="graf graf--h4 graf-after--h3 graf--subtitle">An introduction to iterators and generators</h4></div><div class="section-inner sectionLayout--outsetColumn"><figure name="9b53" id="9b53" class="graf graf--figure graf--layoutOutsetCenter graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 686px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.4%;"></div><img class="graf-image" data-image-id="0*PAb7ciq1C0Xcq916" data-width="4912" data-height="3264" data-unsplash-photo-id="oUeb1rFI2yk" data-is-featured="true" src="https://cdn-images-1.medium.com/max/1200/0*PAb7ciq1C0Xcq916"></div><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@timothycdykes?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com/@timothycdykes?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-creator noopener noopener" target="_blank">Timothy Dykes</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-source noopener noopener" target="_blank">Unsplash</a></figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="0138" id="0138" class="graf graf--p graf-after--figure">In our previous piece, we covered packages and virtual environments.</p><div name="ced5" id="ced5" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/better-programming/beginning-python-programming-part-11-1dc915b4f0fd" data-href="https://medium.com/better-programming/beginning-python-programming-part-11-1dc915b4f0fd" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/better-programming/beginning-python-programming-part-11-1dc915b4f0fd"><strong class="markup--strong markup--mixtapeEmbed-strong">Beginning Python Programming — Part 11</strong><br><em class="markup--em markup--mixtapeEmbed-em">Working with modules and virtual environments</em>medium.com</a><a href="https://medium.com/better-programming/beginning-python-programming-part-11-1dc915b4f0fd" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="45d5bb493d9c80376afa735408e74d49" data-thumbnail-img-id="0*_FhbfLgo1iYhB1cS" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*_FhbfLgo1iYhB1cS);"></a></div><p name="50b9" id="50b9" class="graf graf--p graf-after--mixtapeEmbed">Today, we will be jumping back to cover a few more built-in class methods we haven’t covered yet.</p><p name="f64e" id="f64e" class="graf graf--p graf-after--p">Before we get started, we should cover a few basic algorithms. These are all very basic, but provide a good baseline for us to get started.</p><p name="ea7a" id="ea7a" class="graf graf--p graf-after--p">Let’s begin with <em class="markup--em markup--p-em">while loops</em> which we have previously covered:</p><figure name="37ce" id="37ce" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/eacf5d0e050bf6869ae6ce0b95c552ab.js"></script></figure><p name="658e" id="658e" class="graf graf--p graf-after--figure">I will admit there are much better ways to do this, but this provides us with a simple example to prepare us for the rest of the article.</p><p name="94b3" id="94b3" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">Forward looping</em> with while loops is not new to us, however, we haven’t yet covered <em class="markup--em markup--p-em">reverse loops</em>. While this may be trivial to some of you, I won’t assume all of my readers already understand how looping through lists works.</p><p name="0e4e" id="0e4e" class="graf graf--p graf-after--p">In a reverse loop, we first need to get the length of the list and set our <code class="markup--code markup--p-code">index</code> variable to length - 1. We do this because lists are 0-based, meaning the last accessible index will be one less than the total number of items in our list.</p><p name="3868" id="3868" class="graf graf--p graf-after--p">Instead of comparing the value of <code class="markup--code markup--p-code">index</code> to the length of the list, as we do in forward loops, we need to ensure that the value of <code class="markup--code markup--p-code">index</code> is no less than 0 during our loop.</p><p name="1bf1" id="1bf1" class="graf graf--p graf-after--p">We can perform the work needed on our list then subtract 1 from <code class="markup--code markup--p-code">index</code> to get the previous entry in the list. Once <code class="markup--code markup--p-code">index</code> is less than 0, the while loop exits.</p><p name="b697" id="b697" class="graf graf--p graf-after--p graf--trailing">Finally, I created a function that returns the last item in a given list. It doesn’t matter what list we give it, it will always return the last item. I added this because it is a concept we will need to be familiar with to continue.</p></div></div></section><section name="0740" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="737c" id="737c" class="graf graf--h3 graf--leading">Iterators</h3><p name="5b36" id="5b36" class="graf graf--p graf-after--h3">Sometimes we need to create classes that contain a series of objects that we can loop through while performing some constant action against the data we loop over. These objects could range from a series of numbers up to a series of classes. Iterators are classes that provide this functionality.</p><p name="9f7b" id="9f7b" class="graf graf--p graf-after--p">There are two class methods that you need to become familiar with:</p><ul class="postList"><li name="f8db" id="f8db" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code">__iter__(self)</code> —returns an iterator object</li><li name="2f59" id="2f59" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">__next__(self)</code> — used to return the next item in a sequence</li></ul><p name="2604" id="2604" class="graf graf--p graf-after--li">It is important to understand the difference between <code class="markup--code markup--p-code">__iter__</code> and <code class="markup--code markup--p-code">__init__</code>.</p><p name="7f31" id="7f31" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">__init__</code> is used when you want to create an instance of the class while providing data to the class; this is where we assign data to an iterator.</p><p name="e3c0" id="e3c0" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">__iter__</code> is used when you want to create an instance of the class using a sequence (list, ordered_dict, etc.) to seed the data the iterator will loop through.</p><p name="2bf9" id="2bf9" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">__iter__</code> returns an object with a <code class="markup--code markup--p-code">__next__</code> method, if you have a custom <code class="markup--code markup--p-code">__next__</code> method inside of the class, you only need to <code class="markup--code markup--p-code">return self</code> from the <code class="markup--code markup--p-code">__iter__</code> method.</p><p name="b0f5" id="b0f5" class="graf graf--p graf-after--p">Time for an example:</p><figure name="9d10" id="9d10" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/1b9cccb660f7c983d1bbfc4aaaf80646.js"></script></figure><p name="4755" id="4755" class="graf graf--p graf-after--figure">Here we have a <code class="markup--code markup--p-code">Doubled</code> class with an <code class="markup--code markup--p-code">__init__</code>, <code class="markup--code markup--p-code">__iter__</code>, and <code class="markup--code markup--p-code">__next__</code> method.</p><p name="203e" id="203e" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">__init__</code> asks for a parameter <code class="markup--code markup--p-code">data</code> upon initialization of the class. In our case, we’ve designed the class to double a list of numbers. For this, we need to ensure that we pass a list of integers or float values to the class.</p><p name="828b" id="828b" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code">__init__</code> method then gets the length of the data, so we know when we need to stop iterating over the list we passed in. It saves the data to a class property named <code class="markup--code markup--p-code">data</code> and sets the current index position to 0. We set the current index, so we always start at 0 when we create a new iterator.</p><p name="f77b" id="f77b" class="graf graf--p graf-after--p">Because we are defining our own <code class="markup--code markup--p-code">__next__</code> method in this class, we only need to <code class="markup--code markup--p-code">return self</code> inside of the <code class="markup--code markup--p-code">__iter__</code> method.</p><p name="d4d2" id="d4d2" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">__next__</code> contains the logic we use to return the next value in the list we passed. If we were to pass in a dictionary, it would return the value in the dictionary, although we would need to specify how to return the value of the next key.</p><p name="4471" id="4471" class="graf graf--p graf-after--p">In our <code class="markup--code markup--p-code">__next__</code> method, we first check that our current index position is not equal to the length of the data. If it is, we need to raise the <code class="markup--code markup--p-code">StopIteration</code> exception. This is different from <code class="markup--code markup--p-code">IndexError</code>, which we receive when we hit the end of a list because we might use this iterator for a different data type.</p><p name="3c9f" id="3c9f" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">StopIteration</code> is specific to what error we received, if we need to iterate over the series again, then we either need to create another iterator object or think of a different way to iterate through our data.</p><p name="53d7" id="53d7" class="graf graf--p graf-after--p">Next, we perform the logic for this iterator. Because we are doubling each item in the list, we save the value of the current index multiplied by 2 into a result variable. We do this because we need to prepare our index for the next run, which we do on the next line. Finally, we return the result if everything was successful.</p><p name="cf78" id="cf78" class="graf graf--p graf-after--p graf--trailing">Iterators exist to make our job easier, but also to ensure uniformity in our logic. However, they aren’t the only way to loop through code.</p></div></div></section><section name="39bd" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--outsetColumn"><figure name="89d3" id="89d3" class="graf graf--figure graf--layoutOutsetCenter graf--leading"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 688px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.7%;"></div><img class="graf-image" data-image-id="0*bShb4zTfdA6Iz8z5" data-width="6000" data-height="4000" data-unsplash-photo-id="nyL-rzwP-Mk" src="https://cdn-images-1.medium.com/max/1200/0*bShb4zTfdA6Iz8z5"></div><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@jeisblack?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com/@jeisblack?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-creator noopener noopener noopener" target="_blank">Jason Blackeye</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-source noopener noopener noopener" target="_blank">Unsplash</a></figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="954a" id="954a" class="graf graf--h3 graf-after--figure">Generators</h3><p name="cc85" id="cc85" class="graf graf--p graf-after--h3">Generators are similar to iterators, except they are functions that work like iterators. The neat thing about generators is that they allow your functions to pause until called again. In a sense, they have their own <code class="markup--code markup--p-code">__next__</code> and <code class="markup--code markup--p-code">__iter__</code> method. Unlike functions, they return data using the keyword <code class="markup--code markup--p-code">yield</code>. Let’s look at a straightforward example:</p><figure name="5feb" id="5feb" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/61cf695bffa021d27d4f90b2f87cdc9b.js"></script></figure><p name="96d9" id="96d9" class="graf graf--p graf-after--figure">For the sake of error handling, I added a try/except to this.</p><p name="f42c" id="f42c" class="graf graf--p graf-after--p">First, we create a function named <code class="markup--code markup--p-code">increment</code> which takes one parameter: <code class="markup--code markup--p-code">number</code>. In the body of the function, we have two <code class="markup--code markup--p-code">yield</code> statements; the first returns the number that was passed in and adds 1 to it and the second returns the number plus 2.</p><p name="3434" id="3434" class="graf graf--p graf-after--p">We then need to store the increment function in the variable <code class="markup--code markup--p-code">incrementor</code>, providing the initial value for the increment function above. This will all be stored in the variable and treated like a class object.</p><p name="ee72" id="ee72" class="graf graf--p graf-after--p">From here we can use it as we did an iterator, by passing <code class="markup--code markup--p-code">incrementor</code> to the <code class="markup--code markup--p-code">next()</code> function, we receive each <code class="markup--code markup--p-code">yield</code> statement in order. This means that we would see <code class="markup--code markup--p-code">5</code> and <code class="markup--code markup--p-code">6</code> printed to the console. If we call <code class="markup--code markup--p-code">next(incrementor)</code> a third time, as we do above, we receive a <code class="markup--code markup--p-code">StopIteration</code> exception.</p><p name="4992" id="4992" class="graf graf--p graf-after--p">What makes generators so interesting is that we use infinite loops with them. Since <code class="markup--code markup--p-code">yield</code> pauses the execution of the function, we only receive one result at a time. This means the following code is valid and will not cause problems.</p><figure name="c599" id="c599" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/d1b85efdc2a92ddb77047ba08dc8765d.js"></script></figure><p name="64f4" id="64f4" class="graf graf--p graf-after--figure">Here we have a new incrementor function which accepts a number. The <code class="markup--code markup--p-code">=0</code> means to use 0 as the default value if no number was provided. We then create a local variable <code class="markup--code markup--p-code">n</code> and assign <code class="markup--code markup--p-code">number</code> to it.</p><p name="49f1" id="49f1" class="graf graf--p graf-after--p">Next, we have an infinite loop, and while these usually are not OK to do, here it is acceptable because <code class="markup--code markup--p-code">yield</code> will pause the execution each time it is called. At the end of the function we have <code class="markup--code markup--p-code">n = n + 1</code> which increments our local <code class="markup--code markup--p-code">n</code> variable.</p><p name="3810" id="3810" class="graf graf--p graf-after--p">Since the function paused when <code class="markup--code markup--p-code">yield</code> was passed, it resumes on the line that contains <code class="markup--code markup--p-code">n = n + 1</code> the next time we pass the incrementor to the <code class="markup--code markup--p-code">next()</code> function.</p><p name="90d6" id="90d6" class="graf graf--p graf-after--p">Generators can also be written in a format close to list comprehensions. The only difference is that we use parentheses around the expression instead of square brackets.</p><figure name="ad2c" id="ad2c" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/a1c3b0667baa018271b70d8d78794a97.js"></script></figure><p name="b4d0" id="b4d0" class="graf graf--p graf-after--figure">From here we can access each item in <code class="markup--code markup--p-code">generator_object</code> using a simple for loop, just as we would the resulting list in <code class="markup--code markup--p-code">list_comp_object</code> or we could use <code class="markup--code markup--p-code">next(generator_object)</code> to get the next value.</p><p name="da58" id="da58" class="graf graf--p graf-after--p">One significant difference between iterators and generators is that iterators calculate all of the values up front and store them in memory, generators only store what is necessary for each run in memory.</p><p name="4bb3" id="4bb3" class="graf graf--p graf-after--p">Generators run slower than list comprehensions so unless you are facing a scenario where you might run out of memory, you should use a list comprehension. Hey, it’s easy to refactor if needed.</p><p name="18a3" id="18a3" class="graf graf--p graf-after--p graf--trailing">Generators can be used for recursive tasks such as searching files on a hard drive or digging through web pages in a web scraping utility.</p></div></div></section><section name="4b95" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="92cf" id="92cf" class="graf graf--h3 graf--leading">Summary</h3><p name="e39a" id="e39a" class="graf graf--p graf-after--h3 graf--trailing">Iterators and generators are more of an intermediate topic but once you use them a few times you start looking for ways to use them everywhere. Knowing the difference between iterators and generators is essential for the performance of your application; make sure that you know the difference before including them “just because.”</p></div></div></section><section name="067c" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="174d" id="174d" class="graf graf--h3 graf--leading">What’s Next?</h3><p name="8a74" id="8a74" class="graf graf--p graf-after--h3 graf--trailing">Async is up next, this topic is pretty advanced and provides many options to synchronize your code. Not only can you configure the timing, but you can also run code at the same time. Hang in there, until then, keep practicing!</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@broebling" class="p-author h-card">Bob Roebling</a> on <a href="https://medium.com/p/5450ae804936"><time class="dt-published" datetime="2019-06-10T23:56:24.488Z">June 10, 2019</time></a>.</p><p><a href="https://medium.com/@broebling/beginning-python-programming-part-12-5450ae804936" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 1, 2019.</p></footer></article></body></html>