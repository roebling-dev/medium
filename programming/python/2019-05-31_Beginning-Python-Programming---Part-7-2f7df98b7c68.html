<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Beginning Python Programming — Part 7</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Beginning Python Programming — Part 7</h1>
</header>
<section data-field="subtitle" class="p-summary">
How classes are created, where they come from and more
</section>
<section data-field="body" class="e-content">
<section name="a1ff" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="36d5" id="36d5" class="graf graf--h3 graf--leading graf--title">Beginning Python Programming—Part 7</h3><h4 name="0377" id="0377" class="graf graf--h4 graf-after--h3 graf--subtitle">How classes are created, where they come from and more</h4><figure name="27f1" id="27f1" class="graf graf--figure graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 467px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.7%;"></div><img class="graf-image" data-image-id="0*UluA26VGbpSdz75C" data-width="6000" data-height="4000" data-unsplash-photo-id="5Bo6OfopSi0" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*UluA26VGbpSdz75C"></div><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@hungnp92?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com/@hungnp92?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-creator noopener noopener" target="_blank">Phi Hùng Nguyễn</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-source noopener noopener" target="_blank">Unsplash</a></figcaption></figure><p name="979d" id="979d" class="graf graf--p graf-after--figure">In the last post, we covered classes, methods, and properties.</p><div name="682f" id="682f" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/better-programming/beginning-python-programming-part-6-f128360f44ab" data-href="https://medium.com/better-programming/beginning-python-programming-part-6-f128360f44ab" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/better-programming/beginning-python-programming-part-6-f128360f44ab"><strong class="markup--strong markup--mixtapeEmbed-strong">Beginning Python Programming — Part 6</strong><br><em class="markup--em markup--mixtapeEmbed-em">Creating reusable blueprints for your code</em>medium.com</a><a href="https://medium.com/better-programming/beginning-python-programming-part-6-f128360f44ab" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="6c379a8c40b5cf652768eb698d259f1c" data-thumbnail-img-id="0*i4t_VPny10Pu0guJ" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*i4t_VPny10Pu0guJ);"></a></div><p name="c4b8" id="c4b8" class="graf graf--p graf-after--mixtapeEmbed">These are the basic building blocks for creating new, reusable objects in our code—and another tool for keeping our code clean. We often use classes in Python, so you need a good understanding of this tool to be effective. In this article we will look at how classes are created.</p><h3 name="67e5" id="67e5" class="graf graf--h3 graf-after--p">Initialization</h3><p name="dc0a" id="dc0a" class="graf graf--p graf-after--h3"><em class="markup--em markup--p-em">Initialization</em> for a class, in the most basic sense, is providing it with a value. Sometimes we want a class to have default values when it is created, at other times we want to tell the class what its default values are.</p><p name="b297" id="b297" class="graf graf--p graf-after--p">Classes have a default initializer which is invoked when you do not include your own. This is true for all classes because they all derive from object types.</p><p name="d26e" id="d26e" class="graf graf--p graf-after--p">Previously, I said that <code class="markup--code markup--p-code">class MyClass(object)</code> and <code class="markup--code markup--p-code">class MyClass()</code> were the same. When you create a class it derives from a base class or is subclassed<em class="markup--em markup--p-em">. </em>When you subclass an object, your subclass inherits all of the functionality from the class it was derived from.</p><p name="131a" id="131a" class="graf graf--p graf-after--p">The reason all of this is important is that initialization relies on superclasses<em class="markup--em markup--p-em">, </em>also known as the parent class,<em class="markup--em markup--p-em"> </em>when you don’t create your own initializer.</p><p name="4d89" id="4d89" class="graf graf--p graf-after--p">We need to briefly cover the base <code class="markup--code markup--p-code">object</code> class in <em class="markup--em markup--p-em">builtins.py</em> to illustrate this.</p><figure name="a96c" id="a96c" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/389cd68bfc86696b324f8d7f015fd79e.js"></script></figure><blockquote name="86c0" id="86c0" class="graf graf--blockquote graf-after--figure">Note: this is not all of the class methods for the <code class="markup--code markup--blockquote-code">object</code> class, only the most common. I have slimmed it down to keep you from feeling overwhelmed.</blockquote><p name="0713" id="0713" class="graf graf--p graf-after--blockquote">In order:</p><ul class="postList"><li name="166e" id="166e" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code">__eq__</code> provides the functionality to perform comparisons. Is this class equal to another? It is performed when you use the <code class="markup--code markup--li-code">==</code> operator. You also have others, like<code class="markup--code markup--li-code">__ne__</code>, <code class="markup--code markup--li-code">__lt__</code>, <code class="markup--code markup--li-code">__le__</code>, <code class="markup--code markup--li-code">__gt__</code> and <code class="markup--code markup--li-code">__ge__,</code> that work for the other comparison operators.</li><li name="6b48" id="6b48" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">__init__</code> provides the initialization code that runs whenever you create a new instance of a class. It sets the values of the properties and calls methods of the class, as needed, when the object is instantiated. In most languages this is considered a constructor method, but Python really does not have a constructor method. However, it has something close…</li><li name="ba0e" id="ba0e" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">__new__</code> is as close as Python gets to a constructor method. <code class="markup--code markup--li-code">__new__</code>is responsible for how new objects are created. While simple examples cannot show this functionality, it becomes more common when you have multiple levels of subclassing and need to guide a particular object to subclass from specific objects. <code class="markup--code markup--li-code">__new__</code> is always called before <code class="markup--code markup--li-code">__init__</code> and should not contain default values for an instance.</li><li name="839d" id="839d" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">__repr__</code> provides an unambiguous “official” string reference to the class, by default it is <code class="markup--code markup--li-code">&lt;__main__.MyClass object at 0x100915278&gt;</code>. <code class="markup--code markup--li-code">__main__</code> is the file where this class resides, <code class="markup--code markup--li-code">MyClass</code> is the class the object is derived from, <code class="markup--code markup--li-code">object at 0x100915278</code> is where this object resides in memory, the number is the address of the block where this object starts in hexadecimal format. This can be overridden if you would rather use an object’s primary key in a database or even a <em class="markup--em markup--li-em">guid</em>, globally unique identifier, to uniquely describe this object.</li><li name="b042" id="b042" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">__sizeof__</code> is neat as it shows us the size in bytes of this object. By default, it is 32 bytes but this can get large depending on the data this object holds. Find the size of an object wtih<code class="markup--code markup--li-code">my_object.__sizeof__()</code> but keep in mind — anything with a <code class="markup--code markup--li-code">__</code> should not be called directly, so instead <code class="markup--code markup--li-code">import sys</code> at the top of your code and use <code class="markup--code markup--li-code">sys.getsizeof(my_object)</code> instead. This essentially calls <code class="markup--code markup--li-code">__sizeof__()</code> for you, but this is the recommended way to do it.</li><li name="2e53" id="2e53" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">__str__</code> provides an “informal” string reference to this class. If you do not override this implementation it provides the same information as <code class="markup--code markup--li-code">__repr__</code>. If you need a friendly name for a class — used in strings when you use <code class="markup--code markup--li-code">str(my_object)</code> — this is the place to do it. If you do not override <code class="markup--code markup--li-code">__str__</code> it provides the string description from <code class="markup--code markup--li-code">__repr__</code>.</li></ul><p name="5b8e" id="5b8e" class="graf graf--p graf-after--li">Don’t worry if any of makes no sense to you yet — we will cover it soon.</p><figure name="ff24" id="ff24" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/0120c567c1444ebf3621bee7b599dca7.js"></script></figure><p name="8e2a" id="8e2a" class="graf graf--p graf-after--figure">Armed with this knowledge, we can now understand how classes are created and come with all of this default functionality.</p><figure name="5b07" id="5b07" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 467px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.7%;"></div><img class="graf-image" data-image-id="0*ABQoeOwk5g_FT3Lx" data-width="4892" data-height="3261" data-unsplash-photo-id="v_CxSroHKWg" src="https://cdn-images-1.medium.com/max/800/0*ABQoeOwk5g_FT3Lx"></div><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@thatsmrbio?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com/@thatsmrbio?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-creator noopener" target="_blank">Matthew Hamilton</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-source noopener" target="_blank">Unsplash</a></figcaption></figure><h3 name="d135" id="d135" class="graf graf--h3 graf-after--figure">Subclassing and Overrides</h3><p name="5961" id="5961" class="graf graf--p graf-after--h3">Overrides occur when you change the default implementation of a class.</p><p name="188f" id="188f" class="graf graf--p graf-after--p">Base on the Person class above, what if we did something a little different…</p><figure name="35ac" id="35ac" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/845c5608c7983da8d44ad12f4494c9c6.js"></script></figure><p name="5dc1" id="5dc1" class="graf graf--p graf-after--figure">This produces the following output…</p><pre name="087b" id="087b" class="graf graf--pre graf-after--p">daniel jackson<br>daniel jackson<br>daniel jackson<br>--------------<br>jack<br>jack<br>jack o&#39;neill</pre><p name="0411" id="0411" class="graf graf--p graf-after--pre">Here we subclass <code class="markup--code markup--p-code">Person1</code> using <code class="markup--code markup--p-code">Person2(Person1)</code>. The details are the same for <code class="markup--code markup--p-code">Person1</code> but in <code class="markup--code markup--p-code">Person2</code> we do not need to call an initializer. Keep in mind that <code class="markup--code markup--p-code">Person1</code> overrides the <code class="markup--code markup--p-code">__repr__</code> method while <code class="markup--code markup--p-code">Person2</code> only overrides the <code class="markup--code markup--p-code">__str__</code> method.</p><p name="0f87" id="0f87" class="graf graf--p graf-after--p">As we print <code class="markup--code markup--p-code">daniel</code> we can see that no matter which string representation we call, we always get <em class="markup--em markup--p-em">daniel jackson</em>. Nothing new here.</p><p name="9807" id="9807" class="graf graf--p graf-after--p">But as we call <code class="markup--code markup--p-code">jack</code> we get different results and a clue as to how <code class="markup--code markup--p-code">print()</code> works. Let’s look at the implementation first and then jump back to the results.</p><p name="d7ce" id="d7ce" class="graf graf--p graf-after--p">Our <code class="markup--code markup--p-code">__init__</code> method is missing. By ignoring it, Python automatically looks at the next parent class up for an <code class="markup--code markup--p-code">__init__</code> method. Since <code class="markup--code markup--p-code">Person1</code> contains an <code class="markup--code markup--p-code">__init__</code> method, we use it and provide the <code class="markup--code markup--p-code">first_name</code> and <code class="markup--code markup--p-code">last_name</code> parameters to create our <code class="markup--code markup--p-code">Person2</code> class. If we had a <code class="markup--code markup--p-code">Person3(Person2)</code> class without an initializer, it would go all the way back to <code class="markup--code markup--p-code">Person1</code> in search of a default initializer.</p><p name="3bbb" id="3bbb" class="graf graf--p graf-after--p">Next, we have <code class="markup--code markup--p-code">__str__(self)</code> defined, but it only returns <code class="markup--code markup--p-code">self.first_name</code>, instead of the person’s full name. Because of this small change, we can look at our results to compare differences.</p><p name="22c1" id="22c1" class="graf graf--p graf-after--p">Both <code class="markup--code markup--p-code">print(jack)</code> and <code class="markup--code markup--p-code">print(str(jack)</code> display <em class="markup--em markup--p-em">jack </em>in the terminal. This means that if we do not include <code class="markup--code markup--p-code">str</code> in our print statement, the <code class="markup--code markup--p-code">print</code> function automatically invokes this function of our class.</p><p name="fe6e" id="fe6e" class="graf graf--p graf-after--p">But here’s something interesting, when we use <code class="markup--code markup--p-code">print(repr(jack))</code> we get the full name and not the address in memory as before. This must mean that when we called the <code class="markup--code markup--p-code">print</code> function on <code class="markup--code markup--p-code">__repr__</code> we invoked the implementation from the <code class="markup--code markup--p-code">Person1</code> class.</p><p name="0a1f" id="0a1f" class="graf graf--p graf-after--p graf--trailing">Overrides only work in one direction, if you change the implementation of a child class, it only affects that child class and other children of that child class.</p></div></div></section><section name="fa5f" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="7126" id="7126" class="graf graf--p graf--leading">What would happen if I changed <code class="markup--code markup--p-code">__repr__</code> in <code class="markup--code markup--p-code">Person1</code> to <code class="markup--code markup--p-code">__str__</code>?</p><p name="e5ab" id="e5ab" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">Person1</code> would no longer show a friendly name for each instance of the class instead you’d see the address in memory where the instance resides. However, printing <code class="markup--code markup--p-code">str(daniel)</code> would print <em class="markup--em markup--p-em">daniel jackson.</em></p><p name="cd28" id="cd28" class="graf graf--p graf-after--p">How would <code class="markup--code markup--p-code">Person2</code> be affected by this?</p><p name="a893" id="a893" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">Person2</code> would also print the address in memory when printing <code class="markup--code markup--p-code">repr(jack)</code>, however, we are now overriding <code class="markup--code markup--p-code">__str__</code> from <code class="markup--code markup--p-code">Person1</code> instead of <code class="markup--code markup--p-code">object</code> so we would see <em class="markup--em markup--p-em">jack</em> printed out on the screen, not <em class="markup--em markup--p-em">jack o’neill.</em></p><figure name="2b23" id="2b23" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 525px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75%;"></div><img class="graf-image" data-image-id="0*pk9HMx92W18isTnX" data-width="4032" data-height="3024" data-unsplash-photo-id="YzSZN3qvHeo" src="https://cdn-images-1.medium.com/max/800/0*pk9HMx92W18isTnX"></div><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@gary_at_unsplash?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com/@gary_at_unsplash?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-creator noopener" target="_blank">Gary Chan</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-source noopener" target="_blank">Unsplash</a></figcaption></figure><h3 name="7416" id="7416" class="graf graf--h3 graf-after--figure">Deinitialization</h3><p name="90eb" id="90eb" class="graf graf--p graf-after--h3">Deinitialization, for the most part, happens automatically. More on this shortly. Deinitialization is the process of destroying an object — the inverse of initialization.</p><p name="6ee3" id="6ee3" class="graf graf--p graf-after--p">On the surface it is a straightforward process. All we do is <code class="markup--code markup--p-code">del charlie</code> or <code class="markup--code markup--p-code">del daniel</code>, invoking the <code class="markup--code markup--p-code">__del__</code> method of the class inherited from <code class="markup--code markup--p-code">object</code>. This removes the pointer to the object’s location in memory. Later, a process called <em class="markup--em markup--p-em">garbage collection</em> comes through, like the cleanup robot on Disney’s <em class="markup--em markup--p-em">Wall-E. </em>Garbage collection is always running in the background and sweeping over memory looking for objects that are missing references, then setting those blocks to <em class="markup--em markup--p-em">free</em> status, meaning other programs can use that block of memory for their own needs.</p><p name="cf40" id="cf40" class="graf graf--p graf-after--p">Sometimes this needs a little more thought, so as we dig deeper into deinitialization we need to understand something else…</p><h3 name="d3f6" id="d3f6" class="graf graf--h3 graf-after--p">Reference Counting</h3><p name="9979" id="9979" class="graf graf--p graf-after--h3">Whenever you create a class in Python, you create a reference to an object. When this reference is created the system creates a counter along with it — this counter directly refers to the number of objects (including variables) that point to it.</p><figure name="9eb4" id="9eb4" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 654px; max-height: 608px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 93%;"></div><img class="graf-image" data-image-id="1*P6Z8bwNVVnM2awNQDe67Ug.png" data-width="654" data-height="608" src="https://cdn-images-1.medium.com/max/800/1*P6Z8bwNVVnM2awNQDe67Ug.png"></div></figure><p name="ad8a" id="ad8a" class="graf graf--p graf-after--figure">Here we have two references, both A and B point to Data, so we update the counter to say there are two references. If A were to be deinitialized then we’d only have one reference to Data.</p><p name="41a6" id="41a6" class="graf graf--p graf-after--p">What happens if both A and B no longer reference Data? According to the laws of memory, Data would sit there indefinitely or at least until the computer was turned off.</p><p name="4c3f" id="4c3f" class="graf graf--p graf-after--p">Thanks to operating systems, we don’t have to panic about this situation too much. In Python, we have a tool called Garbage Collection which detects cycles between Python objects and counts the references to objects we have created. If it comes across a block in memory where the reference counter is set to 0, it frees this memory for us.</p><p name="797e" id="797e" class="graf graf--p graf-after--p">Example:</p><figure name="860e" id="860e" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/c4dd2850d3eec68674a8a469d0544832.js"></script></figure><p name="7511" id="7511" class="graf graf--p graf-after--figure">Here we have something referred to as a circular reference. <code class="markup--code markup--p-code">book</code> knows that it belongs to a library and the <code class="markup--code markup--p-code">city_library</code> knows that owns a dictionary of <code class="markup--code markup--p-code">books</code></p><p name="33e1" id="33e1" class="graf graf--p graf-after--p">While examples like this are not commonly found in programming, they can happen and you need to be careful how you code.</p><p name="6809" id="6809" class="graf graf--p graf-after--p">Let us say <code class="markup--code markup--p-code">my_book</code> is a first edition and the second edition just came out. The first edition is no longer relevant, so the library wants to toss it.</p><p name="6fdf" id="6fdf" class="graf graf--p graf-after--p">If the <code class="markup--code markup--p-code">city_library</code> tried to remove <code class="markup--code markup--p-code">my_book</code> they couldn’t, because we still have it in our hands and have a reference to it. If we tried to throw away <code class="markup--code markup--p-code">my_book</code>, we wouldn’t be able to because the library would still be keeping track of it for another reference count. We are in a deadlock.</p><p name="f83a" id="f83a" class="graf graf--p graf-after--p">Because <code class="markup--code markup--p-code">my_book</code> also knows it belongs to <code class="markup--code markup--p-code">city_library</code>, <code class="markup--code markup--p-code">my_book</code> holds a reference to the library. So we have 2 references to <code class="markup--code markup--p-code">my_book</code>, one from us, one from the library, and 1 reference to <code class="markup--code markup--p-code">city_library</code> which is due to the book having <code class="markup--code markup--p-code">city_library</code> stamped inside of it.</p><p name="7b7f" id="7b7f" class="graf graf--p graf-after--p">If we throw away the book, the library never knows about it and assumes it’s still in our hands. If the library removes it from its collection, we still have it and someone else might think we stole it because the book still references the library.</p><p name="63c8" id="63c8" class="graf graf--p graf-after--p">How do we clear this up?</p><p name="0e6f" id="0e6f" class="graf graf--p graf-after--p">We need to remove our references one at a time. First, we need to talk to the library and work out a plan. The library is willing to work with us at the counter while the book is still in our possession.</p><p name="6d4b" id="6d4b" class="graf graf--p graf-after--p">The librarian first scrubs out the reference that the book belongs to the library or effectively <code class="markup--code markup--p-code">del my_book.library</code>, leaving 2 references.</p><p name="0601" id="0601" class="graf graf--p graf-after--p">Next, next we need to remove our reference to the book, we turn the book in by using <code class="markup--code markup--p-code">del my_book</code>, leaving 1 reference</p><p name="49e4" id="49e4" class="graf graf--p graf-after--p">Finally, the library removes the entry from their dictionary of books, using <code class="markup--code markup--p-code">del city_library[&quot;my_book&quot;]</code>, removing the final reference.</p><p name="c8e0" id="c8e0" class="graf graf--p graf-after--p">Garbage collection kicks in and the librarian throws the book in the trash.</p><p name="5a82" id="5a82" class="graf graf--p graf-after--p">Now we could also use something called a weak reference, defined with <code class="markup--code markup--p-code">weakref</code>, on the book signifying that the stamp means nothing, however, the stamp can still be used to trace back to a particular library.</p><p name="7f38" id="7f38" class="graf graf--p graf-after--p">Here’s how that looks:</p><figure name="6a54" id="6a54" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mildocjr/8d18c926e2b996e6612d530433a174c8.js"></script></figure><p name="7e96" id="7e96" class="graf graf--p graf-after--figure">Now, when we call <code class="markup--code markup--p-code">del my_book</code> the reference to the library is automatically deleted and both the <code class="markup--code markup--p-code">city_library</code> and <code class="markup--code markup--p-code">my_book</code> references are deleted for this instance of <code class="markup--code markup--p-code">Book</code>. All the <code class="markup--code markup--p-code">city_library</code> has to do is remove the book from their collection.</p><p name="b28d" id="b28d" class="graf graf--p graf-after--p">Using weak references can help ensure that you don’t struggle to find pesky bugs like this, known as <em class="markup--em markup--p-em">memory leaks</em>. Memory leaks occur when you never release objects from memory and your memory fills up.</p><p name="84de" id="84de" class="graf graf--p graf-after--p">Computers come with large amounts of memory these days and memory leaks are far less common, but they do still happen.</p><p name="9a80" id="9a80" class="graf graf--p graf-after--p">When I was into mixing music I used a program that would scan songs, find the key of the song, then place the key in the metadata of the track. This worked well for small collections, but I had over 50,000 songs — roughly 40 GB of music, well over the amount of RAM I had in my computer. The program would make it through about 15,000 songs then it would become slow or crash. This was because it was opening up music files and holding a strong reference to them.</p><p name="a992" id="a992" class="graf graf--p graf-after--p">There was a failsafe built into the program that when low on memory would trigger a function to clear references to some of the files previously scanned — enough to handle 100 more songs before triggering again. Needless to say, it took about 2 1/2 days to scan all of the songs when it could have been done in about 8 hours.</p><p name="3c6d" id="3c6d" class="graf graf--p graf-after--p">If you want more examples and a possibly better explanation of strong reference cycles, check out <a href="https://stackoverflow.com/a/43889708" data-href="https://stackoverflow.com/a/43889708" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">this Stack Overflow post by Artyer</a>.</p><h3 name="51fc" id="51fc" class="graf graf--h3 graf-after--p">Summary</h3><p name="d245" id="d245" class="graf graf--p graf-after--h3">Today we learned more about how classes are created, where they come from, how we override their functionality, how we get rid of them, reference cycles, and memory leaks. That’s some learning — great job sticking with it!</p><h4 name="14b7" id="14b7" class="graf graf--h4 graf-after--p">Suggested Reading</h4><p name="6f85" id="6f85" class="graf graf--p graf-after--h4">Python Tutorial 9.5 - 9.8 (iterators aren’t difficult, just another class method)</p><div name="e663" id="e663" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://docs.python.org/3/tutorial/classes.html#inheritance" data-href="https://docs.python.org/3/tutorial/classes.html#inheritance" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://docs.python.org/3/tutorial/classes.html#inheritance"><strong class="markup--strong markup--mixtapeEmbed-strong">9. Classes - Python 3.7.3 documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Compared with other programming languages, Python&#39;s class mechanism adds classes with a minimum of new syntax and…</em>docs.python.org</a><a href="https://docs.python.org/3/tutorial/classes.html#inheritance" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="0cd1c2d8f8072f03eda175e66bb38a37"></a></div><p name="0a95" id="0a95" class="graf graf--p graf-after--mixtapeEmbed">Also, read about weak references in chapter 11.6.</p><div name="5b17" id="5b17" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://docs.python.org/3/tutorial/stdlib2.html#weak-references" data-href="https://docs.python.org/3/tutorial/stdlib2.html#weak-references" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://docs.python.org/3/tutorial/stdlib2.html#weak-references"><strong class="markup--strong markup--mixtapeEmbed-strong">11. Brief Tour of the Standard Library - Part II - Python 3.7.3 documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>docs.python.org</a><a href="https://docs.python.org/3/tutorial/stdlib2.html#weak-references" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="f6b143978c67f80375bc6d9c1aae8e17"></a></div><h3 name="0ec9" id="0ec9" class="graf graf--h3 graf-after--mixtapeEmbed">What’s Next</h3><p name="79a4" id="79a4" class="graf graf--p graf-after--h3">Next is formatting, lambdas, and list comprehension. Formatting could have come a long time ago, but I figure it’s pretty easy to grasp. List comprehensions are slightly more difficult but only in syntax and the different ways you can use them.</p><p name="2ef1" id="2ef1" class="graf graf--p graf-after--p">Lambdas are going to be the primary focus because they can be the most confusing.</p><p name="98ee" id="98ee" class="graf graf--p graf-after--p">In general, we are going to learn new ways to make one-liners.</p><div name="097f" id="097f" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://medium.com/@broebling/beginning-python-programming-part-8-966f1189c1fe" data-href="https://medium.com/@broebling/beginning-python-programming-part-8-966f1189c1fe" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/@broebling/beginning-python-programming-part-8-966f1189c1fe"><strong class="markup--strong markup--mixtapeEmbed-strong">Beginning Python Programming — Part 8</strong><br><em class="markup--em markup--mixtapeEmbed-em">In the last post, we dug deep into classes and discovered how they were created and destroyed. We also looked at how we…</em>medium.com</a><a href="https://medium.com/@broebling/beginning-python-programming-part-8-966f1189c1fe" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="ba5a15d209b2efb5460d53d21efa9953" data-thumbnail-img-id="0*l5XIwT5itNQSmAxn" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*l5XIwT5itNQSmAxn);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@broebling" class="p-author h-card">Bob Roebling</a> on <a href="https://medium.com/p/2f7df98b7c68"><time class="dt-published" datetime="2019-05-31T03:16:58.416Z">May 31, 2019</time></a>.</p><p><a href="https://medium.com/@broebling/beginning-python-programming-part-7-2f7df98b7c68" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 1, 2019.</p></footer></article></body></html>