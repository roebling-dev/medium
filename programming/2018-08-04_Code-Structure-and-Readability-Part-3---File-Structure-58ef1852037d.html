<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Code Structure and Readability Part 3 — File Structure</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Code Structure and Readability Part 3 — File Structure</h1>
</header>
<section data-field="subtitle" class="p-summary">
In the previous article, we looked at Classes and Structs.
</section>
<section data-field="body" class="e-content">
<section name="376d" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="e679" id="e679" class="graf graf--h3 graf--leading graf--title">Code Structure and Readability Part 3 — File Structure</h3><figure name="b219" id="b219" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 464px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.2%;"></div><img class="graf-image" data-image-id="0*BOWR9QxyJW9QcMbn" data-width="3000" data-height="1987" src="https://cdn-images-1.medium.com/max/800/0*BOWR9QxyJW9QcMbn"></div><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-creator noopener" target="_blank">Kelly Sikkema</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-source noopener" target="_blank">Unsplash</a></figcaption></figure><p name="b992" id="b992" class="graf graf--p graf-after--figure">In the previous article, we looked at Classes and Structs.</p><div name="c5e2" id="c5e2" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/swift2go/code-structure-and-readability-part-2-classes-ae33c11393e4" data-href="https://medium.com/swift2go/code-structure-and-readability-part-2-classes-ae33c11393e4" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/swift2go/code-structure-and-readability-part-2-classes-ae33c11393e4"><strong class="markup--strong markup--mixtapeEmbed-strong">Code Structure and Readability Part 2 — Classes and Structs</strong><br><em class="markup--em markup--mixtapeEmbed-em">Welcome back, in part 1 we covered some of the basics: variables, data structures, and functions. We learned some…</em>medium.com</a><a href="https://medium.com/swift2go/code-structure-and-readability-part-2-classes-ae33c11393e4" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="49b62c560b45672237111058095553ba" data-thumbnail-img-id="0*3KYYquK3oWzykysO" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*3KYYquK3oWzykysO);"></a></div><p name="964f" id="964f" class="graf graf--p graf-after--mixtapeEmbed">We are going to expand our horizons in this article by looking at file structure.</p><p name="d410" id="d410" class="graf graf--p graf-after--p">Before we begin I want to review the single responsibility principle, separation of concerns, and coupling. They all matter when we start talking about files.</p><p name="bba0" id="bba0" class="graf graf--p graf-after--p">If you’ve been following my Beginning Swift Programming series, you already have a good idea of how the <a href="https://medium.com/@broebling/beginning-swift-programming-part-5-functions-enums-and-scope-d26a62a44e13" data-href="https://medium.com/@broebling/beginning-swift-programming-part-5-functions-enums-and-scope-d26a62a44e13" class="markup--anchor markup--p-anchor" target="_blank">single responsibility principle, separation of concerns</a>, and <a href="https://medium.com/@broebling/beginning-swift-programming-part-10-code-structure-readability-and-principles-c84c30acd0cc" data-href="https://medium.com/@broebling/beginning-swift-programming-part-10-code-structure-readability-and-principles-c84c30acd0cc" class="markup--anchor markup--p-anchor" target="_blank">loosely coupled code</a> matter in your functions and classes. I briefly touched base on how they matter to your project files but if you are already doing this in your classes and functions then it mostly applies to your files.</p><p name="4391" id="4391" class="graf graf--p graf-after--p">I also want to go on a tangent for a minute to go over some advice I learned while taking the <a href="https://devu.com" data-href="https://devu.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">learnvisualstudio.net (now devu.com)</a> course created by <a href="https://medium.com/u/c0da8ab0300f" data-href="https://medium.com/u/c0da8ab0300f" data-anchor-type="2" data-user-id="c0da8ab0300f" data-action-value="c0da8ab0300f" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user" target="_blank">Bob Tabor</a>.</p><ul class="postList"><li name="22ca" id="22ca" class="graf graf--li graf-after--p">Your functions should be no longer than 5 lines — this ensures that your function adheres to the single responsibility program. However, sometimes it may be difficult to adhere to this rule.</li><li name="8750" id="8750" class="graf graf--li graf-after--li">You should break your classes into separate files — One class for one file. This is true in almost all languages, even if you have just a couple of properties in a class, the file should be limited to the scope of the class.</li><li name="19f8" id="19f8" class="graf graf--li graf-after--li">Your classes should not be larger than the height of your screen. — This means that if you have to scroll through your class, it may be too big and should be refactored. I understand this is difficult to do in Swift/Obj-C which is known for its <strong class="markup--strong markup--li-strong">M</strong>assive <strong class="markup--strong markup--li-strong">V</strong>iew <strong class="markup--strong markup--li-strong">C</strong>ontrollers (a joke devs made that derives from the <strong class="markup--strong markup--li-strong">M</strong>odel <strong class="markup--strong markup--li-strong">V</strong>iew <strong class="markup--strong markup--li-strong">C</strong>ontroller, or MVC, pattern).</li></ul><p name="f38d" id="f38d" class="graf graf--p graf-after--li"><em class="markup--em markup--p-em">If you are starting to learn C# or want a great course on HTML, CSS, JS, and Bootstrap, I highly recommend checking out the courses on </em><a href="https://devu.com" data-href="https://devu.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">DevU</em></a><em class="markup--em markup--p-em">.</em></p><p name="b5b5" id="b5b5" class="graf graf--p graf-after--p">I want to also state that the first and last rule above are not hard rules, just guidelines, however, the second should always be followed.</p><p name="e942" id="e942" class="graf graf--p graf-after--p">So how do we structure our files?</p><p name="0516" id="0516" class="graf graf--p graf-after--p">If we are working with classes your files should look a little something like this:</p><pre name="a5ca" id="a5ca" class="graf graf--pre graf-after--p">// filename.ext<br>//<br>// Description of the file and what role it has in your project.<br>// May take more<br>// than a few<br>// lines to do all of this<br>//<br>// Author: Bob Roebling<br>// Date:   2018-08-04<br>// Version: Swift 4.2<br>// Copyright: © 2018 Bob Roebling. All rights reserved.<br>//<br>// Compile Date: 2018-08-04<br>// Last Modification: 2018-08-04</pre><pre name="4af4" id="4af4" class="graf graf--pre graf-after--pre">import UIKit</pre><pre name="b604" id="b604" class="graf graf--pre graf-after--pre"><br>class ProgressView: UIView {</pre><pre name="84f0" id="84f0" class="graf graf--pre graf-after--pre">    //MARK: Properties</pre><pre name="52cf" id="52cf" class="graf graf--pre graf-after--pre">    private var bgCircle: Circle!<br>    private var fgCircle: Circle!</pre><pre name="3d65" id="3d65" class="graf graf--pre graf-after--pre">    let kCAStrokeEnd = &quot;strokeEnd&quot;</pre><pre name="8ae3" id="8ae3" class="graf graf--pre graf-after--pre"><br>    // MARK: - Initialization</pre><pre name="f369" id="f369" class="graf graf--pre graf-after--pre">    override init(frame: CGRect) {<br>        super.init(frame: frame)<br>    }</pre><pre name="33b5" id="33b5" class="graf graf--pre graf-after--pre">    required init?(coder aDecoder: NSCoder) {<br>        super.init(coder: aDecoder)<br>        createProgressCircles()<br>    }</pre><pre name="0b8d" id="0b8d" class="graf graf--pre graf-after--pre"><br>    //MARK: - Public</pre><pre name="8227" id="8227" class="graf graf--pre graf-after--pre">    func animateCircle(with progress: Float) {</pre><pre name="2315" id="2315" class="graf graf--pre graf-after--pre">        fgCircle.strokeEnd = CGFloat(progress)<br>        <br>        let animation = CABasicAnimation(keyPath: kCAStrokeEnd)<br>        animation.duration = 1.1<br>        animation.fromValue = 0<br>        animation.toValue = progress<br>        animation.timingFunction = CAMediaTimingFunction(<br>            name:kCAMediaTimingFunctionEaseInEaseOut)</pre><pre name="e8ec" id="e8ec" class="graf graf--pre graf-after--pre">        fgCircle.add(animation, forKey: kCAStrokeEnd)<br>    }</pre><pre name="34a4" id="34a4" class="graf graf--pre graf-after--pre"><br>    //MARK: - Private</pre><pre name="0589" id="0589" class="graf graf--pre graf-after--pre">    private func createProgressCircles() {</pre><pre name="2f24" id="2f24" class="graf graf--pre graf-after--pre">        // create the path<br>        let path = UIBezierPath(<br>            arcCenter: CGPoint(x: frame.size.width / 2,<br>                               y: frame.size.height / 2),<br>            radius: (frame.size.width - 10) / 2,<br>            startAngle: CGFloat(.pi * -0.5),<br>            endAngle: CGFloat(.pi * 1.5),<br>            clockwise: true).cgPath</pre><pre name="4b2c" id="4b2c" class="graf graf--pre graf-after--pre">        // create the circles<br>        bgCircle = Circle(path: path, isBackground: true)<br>        fgCircle = Circle(path: path, isBackground: false)</pre><pre name="c10f" id="c10f" class="graf graf--pre graf-after--pre">        // add the circles to the view<br>        layer.addSublayer(bgCircle)<br>        layer.addSublayer(fgCircle)<br>    }</pre><pre name="5b95" id="5b95" class="graf graf--pre graf-after--pre">}</pre><p name="88aa" id="88aa" class="graf graf--p graf-after--pre">If we had the typical <code class="markup--code markup--p-code">#!/bin/bash</code> at the top for scripts (Bash, Python, Ruby, etc.) I would place that above the file summary at the top.</p><figure name="6411" id="6411" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 358px; max-height: 340px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 95%;"></div><img class="graf-image" data-image-id="1*Scnqw4KJNwKmmwvAYGsxwA.png" data-width="358" data-height="340" src="https://cdn-images-1.medium.com/max/800/1*Scnqw4KJNwKmmwvAYGsxwA.png"></div><figcaption class="imageCaption">What this code actually does when paired with the circle class.</figcaption></figure><p name="1194" id="1194" class="graf graf--p graf-after--figure"><em class="markup--em markup--p-em">I understand this example seems pretty busy but when you add in syntax coloring, it becomes much easier to read.</em></p><p name="7e75" id="7e75" class="graf graf--p graf-after--p">Let’s talk about the single responsibility principle in relation to functions in reference to the code above.</p><p name="0a2b" id="0a2b" class="graf graf--p graf-after--p">We can see that <code class="markup--code markup--p-code">animateCircle:progress:</code> refers to animating the circle when a new progress value is passed in. This gives it that same nice sweep you see when you close your rings on your Apple Watch. This is all that function is responsible for. It’s 7 lines long.</p><p name="4915" id="4915" class="graf graf--p graf-after--p">We can also see <code class="markup--code markup--p-code">createProgressCircles</code> whose sole responsibility is just putting the circles on the screen. But Bob, I only see 1 circle. I promise it is two. You have the background circle which is a very light green, then you have the dark green circle, which is overlaid on the light green circle. The circle is being drawn out in a pie fashion, I’ve just set a bold stroke on each circle, and removed the circle fill. This function is just 5 lines long, I’ve just split the 5 parameters of <code class="markup--code markup--p-code">UIBezierPath</code> onto separate lines for easier reading. I also put the 2 parameters of <code class="markup--code markup--p-code">CGPoint</code> (for the <code class="markup--code markup--p-code">arcCenter</code> parameter) on two lines to keep the code a little more readable.</p><p name="95bc" id="95bc" class="graf graf--p graf-after--p">The entire file extends just a little past the screen on a 15&quot; monitor with a font size of 11. It doesn’t mean I change the font to size 10 so I can break this rule, it just means that I took a little more of the screen height.</p><p name="4c77" id="4c77" class="graf graf--p graf-after--p">For those who think I’m just full of it and write out meaningless rules, we can get technical about it and I can tell you I originally wrote this code on a 27&quot; screen with plenty of room to spare.</p><p name="d531" id="d531" class="graf graf--p graf-after--p">The reason why you want to keep your entire file limited to the height of your screen is so you can open the file read all of its contents, understand what it does, and move on if it’s not what you were looking for. It’s for your productivity and sanity.</p><p name="6b61" id="6b61" class="graf graf--p graf-after--p">One of the exceptions to this rule is when you are writing many routes for an API that all need to exist in a <strong class="markup--strong markup--p-strong">routes</strong> file, yes you could break this up by method ‘GET’, ‘POST’, ‘PUT’, ‘DELETE’, etc… But you could still have so many ‘GET’ routes that it takes up more than the height of a 27&quot; screen. This is normal.</p><p name="a715" id="a715" class="graf graf--p graf-after--p graf--trailing">The file summary at the top is completely optional, but sometimes it helps to get an idea of what the file does, especially when you get into lengthy files of large applications. <a href="https://github.com/github/orchestrator/blob/master/go/collection/collection.go" data-href="https://github.com/github/orchestrator/blob/master/go/collection/collection.go" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Here is a good example of this</a>.</p></div></div></section><section name="dafd" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="e62a" id="e62a" class="graf graf--p graf--leading">The separation of concerns principle also applies to the code above, it may not be optimal but it does the trick. This file is responsible for managing the addition of the progress view to the screen and handling the animations as needed. It hides the implementation of the <code class="markup--code markup--p-code">Circle</code> class from all other files, but relies on the <code class="markup--code markup--p-code">Circle</code> class to handle the actual creation of the circles.</p><p name="eeb3" id="eeb3" class="graf graf--p graf-after--p">A way to see this would be this file handles the view work of the progress view. The circle class is just responsible for drawing the Circle and passing back something that the progress view class can use to display progress.</p><p name="5650" id="5650" class="graf graf--p graf-after--p">It’s a much more generalized scope than what you’d think about if you were applying separation of concerns to a function.</p><figure name="cd02" id="cd02" class="graf graf--figure graf-after--p graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 477px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 68.2%;"></div><img class="graf-image" data-image-id="1*d-OskePCXYpG-_pkl26EhA.png" data-width="950" data-height="648" src="https://cdn-images-1.medium.com/max/800/1*d-OskePCXYpG-_pkl26EhA.png"></div></figure></div></div></section><section name="4b8e" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="900f" id="900f" class="graf graf--p graf--leading">While coupling is still there because we rely on the <code class="markup--code markup--p-code">Circle</code> class, this is just a relatively small section of the project and should be left self-contained. If I wanted to pull this code out and use it in another project, I’d just need to grab these two files and I’m done.</p><p name="a3f2" id="a3f2" class="graf graf--p graf-after--p">In case you were wondering here’s the code from the <code class="markup--code markup--p-code">Circle</code> class just so you can see how small it really is:</p><pre name="3a7f" id="3a7f" class="graf graf--pre graf-after--p">import UIKit</pre><pre name="8a56" id="8a56" class="graf graf--pre graf-after--pre">class Circle: CAShapeLayer {</pre><pre name="a86d" id="a86d" class="graf graf--pre graf-after--pre">    // MARK: Properties</pre><pre name="914f" id="914f" class="graf graf--pre graf-after--pre">    private lazy var bgColor = UIColor(red: 242 / 255,<br>                                       green: 1,<br>                                       blue: 230 / 255,<br>                                       alpha: 1).cgColor<br>    private lazy var fgColor = UIColor(red: 76 / 255,<br>                                       green: 217 / 255,<br>                                       blue: 100 / 255,<br>                                       alpha: 1).cgColor</pre><pre name="a427" id="a427" class="graf graf--pre graf-after--pre"><br>    //MARK: - Initialization</pre><pre name="78bf" id="78bf" class="graf graf--pre graf-after--pre">    init(path: CGPath, isBackground: Bool) {<br>        super.init()</pre><pre name="c910" id="c910" class="graf graf--pre graf-after--pre">        self.path = path<br>        <br>        self.strokeStart = 0<br>        self.lineWidth = 6<br>        self.fillColor = UIColor.clear.cgColor</pre><pre name="5638" id="5638" class="graf graf--pre graf-after--pre">        if isBackground {<br>            self.strokeColor = bgColor<br>            self.strokeEnd = 1</pre><pre name="816c" id="816c" class="graf graf--pre graf-after--pre">        } else {<br>            self.strokeColor = fgColor<br>            self.lineCap = kCALineCapRound<br>        }<br>    }</pre><pre name="5c92" id="5c92" class="graf graf--pre graf-after--pre">    required init?(coder aDecoder: NSCoder) {<br>        super.init(coder: aDecoder)<br>    }</pre><pre name="c219" id="c219" class="graf graf--pre graf-after--pre">}</pre><p name="8c79" id="8c79" class="graf graf--p graf-after--pre">Nothing spectacular but you could grab these two snippets and create a view that adopts from ProgressView and modify the code to what you need. There isn’t any special sauce to this code, it’s all a part of the Swift standard library.</p><h3 name="a5ea" id="a5ea" class="graf graf--h3 graf-after--p">Summary</h3><p name="d599" id="d599" class="graf graf--p graf-after--h3">After reading this, you should have a good idea of how to structure your files. I debated hard on whether or not to include project structure in this article, but near the end, I decided it would be better to put this in its own article.</p><p name="fc99" id="fc99" class="graf graf--p graf-after--p">It’s ok to have <em class="markup--em markup--p-em">some</em> coupling in your code. When you have everything depending on something else to be there, that’s when you have a birds nest problem. It’s hard to figure out what can work on its own and what cannot. This is where project structure will come in and we will find out about that in the fourth article of this series, where we will learn how to split our project up to make it easier to find the file we are looking for.</p><p name="6103" id="6103" class="graf graf--p graf-after--p">Even if you are not interested in C# at this time, I strongly recommend <a href="https://devu.com" data-href="https://devu.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">devu.com</a> as a good resource for continued education.</p><div name="26c5" id="26c5" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/swift2go/code-structure-and-readability-part-4-project-structure-99f9a6671ce3" data-href="https://medium.com/swift2go/code-structure-and-readability-part-4-project-structure-99f9a6671ce3" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/swift2go/code-structure-and-readability-part-4-project-structure-99f9a6671ce3"><strong class="markup--strong markup--mixtapeEmbed-strong">Code Structure and Readability Part 4 — Project Structure</strong><br><em class="markup--em markup--mixtapeEmbed-em">In the previous article we talked about file structure, today we are moving on to talk about project structure.</em>medium.com</a><a href="https://medium.com/swift2go/code-structure-and-readability-part-4-project-structure-99f9a6671ce3" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="4d33c84a4684800249fb616f3fed512d" data-thumbnail-img-id="0*IZGMJ81n6z7iOcsz" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*IZGMJ81n6z7iOcsz);"></a></div><p name="b6b1" id="b6b1" class="graf graf--p graf-after--mixtapeEmbed"><em class="markup--em markup--p-em">I am not associated with Bob Tabor or learnvisualstudio.net/devu.com other than a paid subscriber to his course, all views and content in this article are my own unless noted from another source. The three guidelines are not my own, but belong to Bob Tabor and all credit goes to him and devu.com, the three guidelines are not directly quoted, but are paraphrased, any exact derivative is purely coincidental.</em></p><figure name="0cb1" id="0cb1" class="graf graf--figure graf-after--p graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 280px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 40%;"></div><a href="http://bit.ly/2KkkwGL" data-href="http://bit.ly/2KkkwGL" class="graf-imageAnchor" data-action="image-link" data-action-observe-only="true"rel="noopener"target="_blank"><img class="graf-image" data-image-id="1*5-oC2BqqizoRxIls08WMmA.png" data-width="1250" data-height="500" src="https://cdn-images-1.medium.com/max/800/1*5-oC2BqqizoRxIls08WMmA.png"></a></div></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@broebling" class="p-author h-card">Bob Roebling</a> on <a href="https://medium.com/p/58ef1852037d"><time class="dt-published" datetime="2018-08-04T21:28:41.266Z">August 4, 2018</time></a>.</p><p><a href="https://medium.com/@broebling/code-structure-and-readability-part-3-file-structure-58ef1852037d" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 1, 2019.</p></footer></article></body></html>